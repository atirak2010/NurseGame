<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Body Quest - ‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Å‡∏≤‡∏¢‡∏ß‡∏¥‡∏†‡∏≤‡∏Ñ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</title>

  <!-- PWA & Mobile -->
  <meta name="theme-color" content="#0a0a1a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Body Quest">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="manifest" href="manifest.json">

  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>

  <!-- ========== WELCOME / NAME INPUT SCREEN ========== -->
  <div id="screen-welcome" class="screen active">
    <div class="welcome-container">
      <div class="logo">
        <span class="logo-icon">ü´Ä</span>
        <h1>Body Quest</h1>
        <p class="subtitle">‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Å‡∏≤‡∏¢‡∏ß‡∏¥‡∏†‡∏≤‡∏Ñ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</p>
      </div>

      <div class="welcome-form">
        <label class="input-label" for="player-name-input">‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</label>
        <input type="text" id="player-name-input" class="text-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô" maxlength="30" autocomplete="off">
        <button class="btn btn-primary btn-large" id="start-btn" onclick="registerPlayer()" style="width:100%;justify-content:center;">
          <strong>‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°</strong>
        </button>
      </div>

      <div class="welcome-players" id="welcome-players" style="display:none;">
        <p class="welcome-players-title">‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏î‡∏¥‡∏°</p>
        <div class="player-list" id="player-list">
          <!-- Generated by JS -->
        </div>
      </div>
    </div>
  </div>

  <!-- ========== HOME SCREEN ========== -->
  <div id="screen-home" class="screen">
    <div class="home-container">
      <div class="logo">
        <span class="logo-icon">ü´Ä</span>
        <h1>Body Quest</h1>
        <p class="subtitle">‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Å‡∏≤‡∏¢‡∏ß‡∏¥‡∏†‡∏≤‡∏Ñ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</p>
      </div>

      <div class="player-info-bar" id="player-info-bar">
        <span class="player-greeting">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, <strong id="player-name-display">-</strong></span>
        <button class="btn-switch-player" onclick="showScreen('welcome')">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</button>
      </div>

      <div class="menu-buttons">
        <button class="btn btn-primary btn-large" onclick="startGame('system-match')">
          <span class="btn-icon">üé¥</span>
          <span class="btn-text">
            <strong>‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</strong>
            <small>‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢</small>
          </span>
        </button>

        <button class="btn btn-secondary btn-large" onclick="startGame('body-builder')">
          <span class="btn-icon">üßç</span>
          <span class="btn-text">
            <strong>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢</strong>
            <small>‡∏ß‡∏≤‡∏á‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</small>
          </span>
        </button>

        <button class="btn btn-accent btn-large" onclick="startGame('quiz')">
          <span class="btn-icon">‚öîÔ∏è</span>
          <span class="btn-text">
            <strong>‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</strong>
            <small>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏¢‡∏ß‡∏¥‡∏†‡∏≤‡∏Ñ</small>
          </span>
        </button>

        <button class="btn btn-ghost btn-large" onclick="showScreen('collection')">
          <span class="btn-icon">üìö</span>
          <span class="btn-text">
            <strong>‡∏Ñ‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î</strong>
            <small>‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏™‡∏°‡πÑ‡∏î‡πâ</small>
          </span>
        </button>

        <button class="btn btn-ghost btn-large" onclick="showScreen('leaderboard')">
          <span class="btn-icon">üèÜ</span>
          <span class="btn-text">
            <strong>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</strong>
            <small>‡∏î‡∏π‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</small>
          </span>
        </button>
      </div>

      <div class="stats-bar">
        <div class="stat">
          <span class="stat-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</span>
          <span class="stat-value" id="total-score">0</span>
        </div>
        <div class="stat">
          <span class="stat-label">‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏™‡∏∞‡∏™‡∏°</span>
          <span class="stat-value"><span id="cards-collected">0</span>/<span id="cards-total">0</span></span>
        </div>
        <div class="stat">
          <span class="stat-label">‡∏£‡∏∞‡∏î‡∏±‡∏ö</span>
          <span class="stat-value" id="player-level">Lv.1</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== SYSTEM MATCH SCREEN ========== -->
  <div id="screen-system-match" class="screen">
    <div class="game-header">
      <button class="btn-back" onclick="showScreen('home')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
      <div class="game-info">
        <span class="game-title">üé¥ ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
        <span class="game-timer" id="match-timer">‚è± 60</span>
      </div>
      <div class="game-score" id="match-score">0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
    </div>

    <div class="match-instruction">
      <p>‡πÅ‡∏ï‡∏∞‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á</p>
    </div>

    <!-- Floating selected card indicator (mobile) -->
    <div class="selected-indicator" id="match-selected-indicator" style="display:none;">
      <span class="selected-indicator-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ñ‡∏∑‡∏≠: </span>
      <span id="match-selected-name"></span>
      <button class="selected-indicator-cancel" onclick="cancelMatchSelection()">‚úï</button>
    </div>

    <div class="match-layout">
      <div class="match-cards" id="match-cards">
        <!-- Cards will be generated by JS -->
      </div>
      <div class="match-zones" id="match-zones">
        <!-- Drop zones will be generated by JS -->
      </div>
    </div>

    <button class="btn btn-primary btn-check" id="match-check-btn" onclick="checkMatches()" style="display:none;">
      ‚úì ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
    </button>
  </div>

  <!-- ========== BODY BUILDER SCREEN ========== -->
  <div id="screen-body-builder" class="screen">
    <div class="game-header">
      <button class="btn-back" onclick="showScreen('home')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
      <div class="game-info">
        <span class="game-title">üßç ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢</span>
        <span class="game-timer" id="body-timer">‚è± 90</span>
      </div>
      <div class="game-score" id="body-score">0 / 0</div>
    </div>

    <!-- Floating selected card indicator (mobile) -->
    <div class="selected-indicator" id="body-selected-indicator" style="display:none;">
      <span class="selected-indicator-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ñ‡∏∑‡∏≠: </span>
      <span id="body-selected-name"></span>
      <button class="selected-indicator-cancel" onclick="cancelBodySelection()">‚úï</button>
    </div>

    <div class="body-layout">
      <div class="body-silhouette" id="body-silhouette">
        <svg viewBox="0 0 200 450" class="body-svg">
          <!-- Head -->
          <ellipse cx="100" cy="35" rx="28" ry="33" class="body-part"/>
          <!-- Neck -->
          <rect x="90" y="65" width="20" height="20" rx="5" class="body-part"/>
          <!-- Torso -->
          <path d="M60,85 Q55,85 55,95 L50,200 Q50,210 60,215 L80,220 L120,220 L140,215 Q150,210 150,200 L145,95 Q145,85 140,85 Z" class="body-part"/>
          <!-- Left Arm -->
          <path d="M55,90 Q40,95 35,130 L30,180 Q28,190 33,192 L38,190 Q42,185 44,170 L55,130" class="body-part"/>
          <!-- Right Arm -->
          <path d="M145,90 Q160,95 165,130 L170,180 Q172,190 167,192 L162,190 Q158,185 156,170 L145,130" class="body-part"/>
          <!-- Left Leg -->
          <path d="M70,218 L65,300 L60,380 Q58,395 65,400 L75,400 Q80,398 78,385 L80,300 L85,220" class="body-part"/>
          <!-- Right Leg -->
          <path d="M115,220 L120,300 L122,385 Q124,398 130,400 L138,400 Q143,395 140,380 L135,300 L130,218" class="body-part"/>

          <!-- Anatomical guide lines (subtle) -->
          <!-- Ribcage outline -->
          <path d="M62,100 Q75,95 100,93 Q125,95 138,100" class="body-guide"/>
          <path d="M58,120 Q80,115 100,113 Q120,115 142,120" class="body-guide"/>
          <path d="M55,145 Q80,138 100,136 Q120,138 145,145" class="body-guide"/>
          <!-- Diaphragm line -->
          <line x1="55" y1="175" x2="145" y2="175" class="body-guide-dash"/>
          <!-- Pelvis line -->
          <path d="M58,210 Q80,205 100,203 Q120,205 142,210" class="body-guide"/>
          <!-- Center line -->
          <line x1="100" y1="68" x2="100" y2="215" class="body-guide-center"/>
        </svg>

        <div class="drop-zones" id="body-drop-zones">
          <!-- Drop zones generated by JS -->
        </div>
      </div>

      <div class="body-cards-panel" id="body-cards-panel">
        <!-- Organ cards generated by JS -->
      </div>
    </div>
  </div>

  <!-- ========== QUIZ SCREEN ========== -->
  <div id="screen-quiz" class="screen">
    <div class="game-header">
      <button class="btn-back" onclick="quitQuiz()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
      <div class="game-info">
        <span class="game-title">‚öîÔ∏è ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</span>
        <span class="game-timer" id="quiz-timer">‚è± 15</span>
      </div>
      <div class="game-score" id="quiz-score-display">0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
    </div>

    <div class="quiz-progress">
      <div class="progress-bar">
        <div class="progress-fill" id="quiz-progress-fill"></div>
      </div>
      <span class="progress-text" id="quiz-progress-text">1 / 10</span>
    </div>

    <div class="quiz-hp-bar">
      <div class="hp-container">
        <span class="hp-label">‚ù§Ô∏è HP</span>
        <div class="hp-bar">
          <div class="hp-fill" id="quiz-hp-fill"></div>
        </div>
        <span class="hp-text" id="quiz-hp-text">100</span>
      </div>
      <div class="streak-display">
        <span id="quiz-streak">üî• 0</span>
      </div>
    </div>

    <div class="quiz-card" id="quiz-card">
      <div class="quiz-question" id="quiz-question">
        <!-- Question text -->
      </div>
      <div class="quiz-options" id="quiz-options">
        <!-- Options generated by JS -->
      </div>
    </div>

    <div class="quiz-feedback" id="quiz-feedback" style="display:none;">
      <div class="feedback-icon" id="feedback-icon"></div>
      <div class="feedback-text" id="feedback-text"></div>
      <button class="btn btn-primary" onclick="nextQuestion()">‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
    </div>
  </div>

  <!-- ========== COLLECTION SCREEN ========== -->
  <div id="screen-collection" class="screen">
    <div class="game-header">
      <button class="btn-back" onclick="showScreen('home')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
      <div class="game-info">
        <span class="game-title">üìö ‡∏Ñ‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î</span>
      </div>
      <div class="game-score" id="collection-count">0 ‡∏Å‡∏≤‡∏£‡πå‡∏î</div>
    </div>

    <div class="collection-filters" id="collection-filters">
      <button class="filter-btn active" onclick="filterCollection('all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      <!-- System filter buttons generated by JS -->
    </div>

    <div class="collection-grid" id="collection-grid">
      <!-- Cards generated by JS -->
    </div>
  </div>

  <!-- ========== LEADERBOARD SCREEN ========== -->
  <div id="screen-leaderboard" class="screen">
    <div class="game-header">
      <button class="btn-back" onclick="showScreen('home')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
      <div class="game-info">
        <span class="game-title">üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>
      </div>
      <div class="game-score"></div>
    </div>

    <div class="leaderboard-container">
      <div class="leaderboard-tabs">
        <button class="lb-tab active" onclick="showLeaderboardTab('total')" id="lb-tab-total">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</button>
        <button class="lb-tab" onclick="showLeaderboardTab('cards')" id="lb-tab-cards">‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏™‡∏∞‡∏™‡∏°</button>
      </div>
      <div class="leaderboard-list" id="leaderboard-list">
        <!-- Generated by JS -->
      </div>
    </div>
  </div>

  <!-- ========== RESULTS SCREEN ========== -->
  <div id="screen-results" class="screen">
    <div class="results-container">
      <div class="results-icon" id="results-icon">üéâ</div>
      <h2 id="results-title">‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!</h2>
      <div class="results-stats" id="results-stats">
        <!-- Stats generated by JS -->
      </div>
      <div class="results-cards" id="results-cards">
        <!-- Unlocked cards shown here -->
      </div>
      <div class="results-funfact" id="results-funfact" style="display:none;">
        <span class="funfact-label">üí° ‡∏£‡∏π‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</span>
        <p id="funfact-text"></p>
      </div>
      <div class="results-buttons">
        <button class="btn btn-primary" id="results-replay-btn">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button class="btn btn-ghost" onclick="showScreen('home')">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
      </div>
    </div>
  </div>

  <!-- ========== CARD DETAIL MODAL ========== -->
  <div id="card-modal" class="modal" style="display:none;">
    <div class="modal-overlay" onclick="closeModal()"></div>
    <div class="modal-content" id="modal-content">
      <!-- Card detail generated by JS -->
    </div>
  </div>

  <!-- ========== TOAST NOTIFICATION ========== -->
  <div id="toast-container"></div>

  <script src="data.js"></script>
  <script src="game.js"></script>
</body>
</html>
